@model SupperClub.Models.CreditCardDetailsViewModelOld

@{
    ViewBag.Title = "Payment Details";
}

@section PageSpecificScripts {
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#creditCardDetails_CardType').change(function () {
                if ($(this).val() == "MAESTRO") {
                    $("#Maestro").show();
                }
                else {
                    $("#Maestro").hide();
                }
            });
            $("#creditCardDetailsForm").submit(function () {
                var cardType = $('#creditCardDetails_CardType option:selected').val();
                if (cardType != null && cardType.length > 0)
                    return true;
                else
                    return false;                    
            });
        });
    </script>
    }

<!--  Page Title -->
<div class="container pattern-design2">
    <div class="container">
        <p>@HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString() / @ViewBag.Title</p>
    </div>	
</div>
<!-- Page Title End -->
@if (ViewBag.Notification != null || TempData["Notification"] != null)
{
    SupperClub.Models.NotificationModel nModel = (ViewBag.Notification == null) ? (SupperClub.Models.NotificationModel)TempData["Notification"] : (SupperClub.Models.NotificationModel)ViewBag.Notification;
    TempData["Notification"] = null;
    @Html.Partial("_Notification", nModel);
}
@if (ViewBag.HideMainContainer == null || ViewBag.HideMainContainer == false)
{
<!-- 960 Container Start -->
<div class="container">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "creditCardDetailsForm" }))
    {
    <div class="sixteen columns">
        <ul id="breadcrumbs">
            <li><a href="@Url.Action("ChooseTickets")" >Tickets <span>-</span></a></li>
            <li><a href="@Url.Action("ReviewPurchase")" >Review <span>-</span></a></li>
            <li class="active" style="color: #F60">Payment</li>
        </ul>
        
    </div>
        
        <p style="margin-top:20px;">@Html.ValidationSummary()</p>
    
    @Html.HiddenFor(x => x.bookingModel.eventId)
    @Html.HiddenFor(x => x.bookingModel.numberOfTickets)
        
    <div class="eight columns">

        <div class="container sub-title2">
            <h2>Credit Card Details</h2>
        </div>
        
        <!-- Choose Card Type -->
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.CardType)
            @Html.ValidationMessageFor(m => m.creditCardDetails.CardType)
            @Html.DropDownListFor(m => m.creditCardDetails.CardType, Model.CreditCardTypes, "Select", new { @class = "custom_select" })
        </div>


        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.CreditCardNumber)
            @Html.ValidationMessageFor(m => m.creditCardDetails.CreditCardNumber)
            @Html.EditorFor(m => m.creditCardDetails.CreditCardNumber)
        </div>

        <!-- Optional for Maestro only -->
        <div id="Maestro" style="display:none;">
            <div>
                @Html.LabelFor(m => m.creditCardDetails.StartMonth)
                @Html.TextBoxFor(m => m.creditCardDetails.StartMonth, new { style = "max-width: 20px; display: inline", placeholder = "MM" })
                /
                @Html.TextBoxFor(m => m.creditCardDetails.StartYear, new { style = "max-width: 20px; display: inline", placeholder = "YY" })
                @Html.ValidationMessageFor(m => m.creditCardDetails.StartYear)
                @Html.ValidationMessageFor(m => m.creditCardDetails.ExpiryYear)
            </div>
            <div class="field">
                @Html.LabelFor(m => m.creditCardDetails.IssueNumber)
                @Html.ValidationMessageFor(m => m.creditCardDetails.IssueNumber)
                @Html.EditorFor(m => m.creditCardDetails.IssueNumber)
            </div>
        </div>

        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.ExpiryMonth)
            @Html.TextBoxFor(m => m.creditCardDetails.ExpiryMonth, new { style = "max-width: 20px; display: inline", placeholder = "MM" })
            /
            @Html.TextBoxFor(m => m.creditCardDetails.ExpiryYear, new { style = "max-width: 20px; display: inline", placeholder = "YY" })
            @Html.ValidationMessageFor(m => m.creditCardDetails.ExpiryMonth)
            @Html.ValidationMessageFor(m => m.creditCardDetails.ExpiryYear)
        </div>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.CV2)
            <p>(The 3 digit security number on the back of your card)</p>
            @Html.ValidationMessageFor(m => m.creditCardDetails.CV2)
            @Html.EditorFor(m => m.creditCardDetails.CV2)
        </div>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.CardHolder)
            @Html.ValidationMessageFor(m => m.creditCardDetails.CardHolder)
            @Html.EditorFor(m => m.creditCardDetails.CardHolder)
        </div>
    </div>

    <div class="eight columns">
        <h4 class="headline">Address Details for this card</h4>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.Address1)
            @Html.ValidationMessageFor(m => m.creditCardDetails.Address1)
            @Html.TextBoxFor(m => m.creditCardDetails.Address1)
        </div>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.Address2)
            @Html.ValidationMessageFor(m => m.creditCardDetails.Address2)
            @Html.TextBoxFor(m => m.creditCardDetails.Address2)
        </div>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.City)
            @Html.ValidationMessageFor(m => m.creditCardDetails.City)
            @Html.TextBoxFor(m => m.creditCardDetails.City)
        </div>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.PostCode)
            @Html.ValidationMessageFor(m => m.creditCardDetails.PostCode)
            @Html.TextBoxFor(m => m.creditCardDetails.PostCode)
        </div>
        <div class="field">
            @Html.LabelFor(m => m.creditCardDetails.Country)
            @Html.ValidationMessageFor(m => m.creditCardDetails.Country)
            @Html.TextBoxFor(m => m.creditCardDetails.Country)
        </div>
    </div>
    
    <div class="fourteen columns"> 
        <input type="submit" value="Make Purchase" class="button medium green" style="float: right" />
    </div>
    }
</div>
<!-- 960 Container End -->
}
