<!-- Basic Page Needs
    ================================================== -->
<meta charset="utf-8">
<title>@ViewBag.Title</title>
<meta name="description" content="@ViewBag.Description">

<!-- Mobile Specific
 ================================================== -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- CSS
 ================================================== -->

<!-- Prefetch DNS for external assets (Twitter widgets etc). -->
<link rel="dns-prefetch" href="//ajax.googleapis.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//themes.googleusercontent.com">


<link rel="stylesheet" href="@Url.Content("~/Content/css/screen.css")">
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,700,900' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/css/jquery-ui-1.10.3.min.css")" />

<!-- Decibel Insight Pixel
     ================================================== -->
@if (bool.Parse(System.Web.Configuration.WebConfigurationManager.AppSettings["UseDecibalInsight"]).ToString().ToLower() == "true")
{
   <!-- Decibel Insight - grubclub.com -->
    <script type="text/javascript">
        // <![CDATA[
        (function (d, e, c, i, b, el, it) {
            d._da_ = d._da_ || []; _da_.oldErr = d.onerror; _da_.err = [];
            d.onerror = function () { _da_.err.push(arguments); _da_.oldErr && _da_.oldErr.apply(d, Array.prototype.slice.call(arguments)); };
            d.DecibelInsight = b; d[b] = d[b] || function () { (d[b].q = d[b].q || []).push(arguments); };
            el = e.createElement(c), it = e.getElementsByTagName(c)[0]; el.async = 1; el.src = i; it.parentNode.insertBefore(el, it);
        })(window, document, 'script', '//cdn.decibelinsight.net/i/21769/di.js', 'decibelInsight');
        // ]]>
    </script>
}

<!-- Scripts
 ================================================== -->
<script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/bower_components/modernizr/modernizr.js")"></script>
<script src="@Url.Content("~/bower_components/jquery/dist/jquery.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.10.4.min.js")" type="text/javascript"></script>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDi_QHwmWx0MFk5L7BTwCfvyvM_iPJyKq4"></script>
<script src="@Url.Content("~/bower_components/chosen_v1.3.0/chosen.jquery.min.js")"></script>
<script src="@Url.Content("~/bower_components/svg4everybody/svg4everybody.min.js")"></script>
<script src="@Url.Content("~/bower_components/owl-carousel2/dist/owl.carousel.min.js")"></script>
<script src="@Url.Content("~/bower_components/nouislider/distribute/jquery.nouislider.all.min.js")"></script>

<!-- legacy.js is datepicker support for ie8 -->
<script src="@Url.Content("~/bower_components/pickadate/lib/compressed/legacy.js")"></script>
<script src="@Url.Content("~/bower_components/pickadate/lib/compressed/picker.js")"></script>
<script src="@Url.Content("~/bower_components/pickadate/lib/compressed/picker.date.js")"></script>

<script src="@Url.Content("~/bower_components/nanoscroller/bin/javascripts/jquery.nanoscroller.min.js")"></script>
<script src="@Url.Content("~/bower_components/magnific-popup/dist/jquery.magnific-popup.min.js")"></script>
<script src="@Url.Content("~/bower_components/jquery.countdown/dist/jquery.countdown.js")"></script>
<script src="@Url.Content("~/Scripts/init.min.js")"></script>

<script src="@Url.Content("~/Content/js/twitter.js")" type="text/javascript"></script>
<!-- FB Advertising Pixel
   ==================================================== -->
@if (HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().ToLower() == "booking" && HttpContext.Current.Request.RequestContext.RouteData.Values["action"].ToString().ToLower() == "postpaymentsuccess" && bool.Parse(System.Web.Configuration.WebConfigurationManager.AppSettings["UseFBAdvertising"]).ToString().ToLower() == "true")
    {
    <script type="text/javascript">
        var fb_param = {};
        fb_param.pixel_id = '6006317675302';
        fb_param.value = '0.00';
        fb_param.currency = 'GBP';
        (function () {
            var fpw = document.createElement('script');
            fpw.async = true;
            fpw.src = '//connect.facebook.net/en_US/fp.js';
            var ref = document.getElementsByTagName('script')[0];
            ref.parentNode.insertBefore(fpw, ref);
        })();
    </script>
    <noscript><img height="1" width="1" alt="" style="display:none" src="https://www.facebook.com/offsite_event.php?id=6006317675302&amp;value=0&amp;currency=GBP" /></noscript>
    }
@if (bool.Parse(System.Web.Configuration.WebConfigurationManager.AppSettings["UseGoogleAnalytics"]))
    {
        <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-36514914-1', 'auto');
        ga('send', 'pageview');
    </script>
        <!-- End Google Analytics -->
    }
@if (bool.Parse(System.Web.Configuration.WebConfigurationManager.AppSettings["UseSegment"]))
    {
    <script type="text/javascript">
        !function () {
            var analytics = window.analytics = window.analytics || []; if (!analytics.initialize) if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice."); else {
                analytics.invoked = !0; analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "page", "once", "off", "on"]; analytics.factory = function (t) { return function () { var e = Array.prototype.slice.call(arguments); e.unshift(t); analytics.push(e); return analytics } }; for (var t = 0; t < analytics.methods.length; t++) { var e = analytics.methods[t]; analytics[e] = analytics.factory(e) } analytics.load = function (t) { var e = document.createElement("script"); e.type = "text/javascript"; e.async = !0; e.src = ("https:" === document.location.protocol ? "https://" : "http://") + "cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js"; var n = document.getElementsByTagName("script")[0]; n.parentNode.insertBefore(e, n) }; analytics.SNIPPET_VERSION = "3.1.0";
                analytics.load("@System.Web.Configuration.WebConfigurationManager.AppSettings["SegmentKey"]");
                analytics.page();
            }
        }();
    </script>
    }
    @if (HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().ToLower() == "booking" && (HttpContext.Current.Request.RequestContext.RouteData.Values["action"].ToString().ToLower() == "postpaymentsuccessnew" || HttpContext.Current.Request.RequestContext.RouteData.Values["action"].ToString().ToLower() == "postpaymentsuccessgc"))
    {
    if (bool.Parse(System.Web.Configuration.WebConfigurationManager.AppSettings["UseGoogleAnalytics"]))
 {
       <!-- Google Code for Google Analytics transaction tracking-->
    <script type="text/javascript">
    ga('require', 'ecommerce');   // Load the ecommerce plug-in.
    ga('ecommerce:addTransaction', {
        'id': '@ViewBag.TransactionId',   // Transaction ID. Required.
        'affiliation': '@ViewBag.Name',   // Affiliation or store name.
        'revenue': '@ViewBag.SaleValue',               // Grand Total.
        'shipping': '0',                  // Shipping.
        'tax': '0'                     // Tax.
    });
    ga('ecommerce:addItem', {
        'id': '@ViewBag.TransactionId',                     // Transaction ID. Required.
        'name': '@ViewBag.EventName',    // Product name. Required.
        'sku': '@ViewBag.EventId',                 // SKU/code.
            'category': '',         // Category or variation.
            'price': '@ViewBag.TicketUnitPrice',                 // Unit price.
        'quantity': '@ViewBag.TotalTickets'                   // Quantity.
        });
        ga('ecommerce:send');
    </script>
}
    }