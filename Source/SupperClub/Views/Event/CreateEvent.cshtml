@model SupperClub.Domain.Event
@{
    ViewBag.Title = "Create Event";
}
@section PageSpecificScripts {
    <link rel="stylesheet" type="text/css"  href="@Url.Content("~/Content/css/datepicker/jquery-ui-1.8.23.custom.css")" />
    <link rel="stylesheet" type="text/css"  href="@Url.Content("~/Content/css/timepicker/jquery.ui.timepicker.css")" />
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/css/multi-select.css")">   
    <link rel='stylesheet' type="text/css" href="@Url.Content("~/Content/css/mprogress.min.css")">


    @*<link rel="stylesheet" type="text/css" href="@Url.Content("~/Scripts/plupload/jquery.plupload.queue/css/jquery.plupload.queue.css")" />
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Scripts/dropzone/dropzone.min.css")" />*@

<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.css" rel="stylesheet" type="text/css">
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

    @* http://fgelinas.com/code/timepicker/ *@
    <script src="@Url.Content("~/Scripts/old/jquery.ui.timepicker.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/old/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/old/jquery.validate.date.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/old/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    @*This script handles additional custom date validation on dd/MM/yy*@
    <script src="@Url.Content("~/Scripts/old/jquery.validate.custom.js")" type="text/javascript"></script>
    @*http://code.google.com/p/jquery-formatcurrency/*@
    <script src="@Url.Content("~/Scripts/jquery.formatCurrency-1.4.0.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.numeric.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.multi-select.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.quicksearch.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/mprogress.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/feather.js")" type="text/javascript"></script>
    @*<script src="@Url.Content("~/scripts/plupload/plupload.full.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/scripts/dropzone/dropzone.min.js")" type="text/javascript"></script>   *@
    @*<script src="@Url.Content("~/scripts/plupload/jquery.plupload.queue/jquery.plupload.queue.js")" type="text/javascript"></script>*@
    <script src="@Url.Content("~/Scripts/old/ww.jquery.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/scripts/textcounter.min.js")" type="text/javascript"></script>
    <style>
        html {
            font-family: "roboto", helvetica;
            position: relative;
            height: 100%;
            font-size: 100%;
            line-height: 1.5;
            color: #444;
        }

        h2 {
            margin: 1.75em 0 0;
            font-size: 5vw;
        }

        h3 {
            font-size: 1.3em;
        }

        .v-center {
            height: 100vh;
            width: 100%;
            display: table;
            position: relative;
            text-align: center;
        }

            .v-center > div {
                display: table-cell;
                vertical-align: middle;
                position: relative;
                top: -10%;
            }

        .btn {
            font-size: 3vmin;
            padding: 0.75em 1.5em;
            background-color: #fff;
            border: 1px solid #bbb;
            color: #333;
            text-decoration: none;
            display: inline;
            border-radius: 4px;
            -webkit-transition: background-color 1s ease;
            -moz-transition: background-color 1s ease;
            transition: background-color 1s ease;
        }

            .btn:hover {
                background-color: #ddd;
                -webkit-transition: background-color 1s ease;
                -moz-transition: background-color 1s ease;
                transition: background-color 1s ease;
            }

        .btn-small {
            padding: .75em 1em;
            font-size: 0.8em;
        }

        .modal-box {
            display: none;
            position: absolute;
            z-index: 1000;
            width: 98%;
            background: white;
            border-bottom: 1px solid #aaa;
            border-radius: 4px;
            box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
            background-clip: padding-box;

        }
        .demo-bar {
            margin: 10px 0;
            width:100%;
            max-width: 690px;
            height:5px;
        }

        @@media (min-width: 32em) {

            .modal-box {
                width: 70%;
            }
        }

        .modal-box header,
        .modal-box .modal-header {
            padding: 1.25em 1.5em;
            border-bottom: 1px solid #ddd;
        }

            .modal-box header h3,
            .modal-box header h4,
            .modal-box .modal-header h3,
            .modal-box .modal-header h4 {
                margin: 0;
            }

        .modal-box .modal-body {
            padding: 2em 1.5em;
        }

        .modal-box footer,
        .modal-box .modal-footer {
            padding: 1em;
            border-top: 1px solid #ddd;
            background: rgba(0, 0, 0, 0.02);
            text-align: right;
        }

        .modal-overlay {
            opacity: 0;
            filter: alpha(opacity=0);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 900;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3) !important;
        }

        a.close {
            line-height: 1;
            font-size: 1.5em;
            position: absolute;
            top: 5%;
            right: 2%;
            text-decoration: none;
            color: #bbb;
        }

            a.close:hover {
                color: #222;
                -webkit-transition: color 1s ease;
                -moz-transition: color 1s ease;
                transition: color 1s ease;
            }

        #ImageContainer img {
            margin: 10px;
            vertical-align: top;
            height: 165px;
            border-radius: 5px;
            -webkit-box-shadow: 2px 2px 4px #535353;
            box-shadow: 2px 2px 4px #535353;
        }
        #Uploader_filelist
        {
            height: 140px;
        }
        #ImagePreview {
            padding: 20px;
            background: white;
            position: absolute;
            border-radius: 8px;
        }
        #ImagePreview img{

        }
        .field textarea {
    width: 100%;
    height: 60px;
    margin-right: -200px;
}
        .error-text-min{
            color:red;
        }
    </style>

    <script type="text/javascript">



    var seatingCntr = 0;
    var menuOptionCntr = 0;
    var homeeventapprovalcheck=0;
    /* jQuery Validation with Tabs*/

    //Make sure the validator works for hidden fields
    $.validator.setDefaults({ ignore: '' });

    function validateApproval()
    {
        var cnt=0; var val1;
        $("input[name='homeEvent']:checked").each(function ()
        {
            val1=$(this).val();
            cnt++;
        });
        if(cnt==0)
        {
            $('#message').text("Please Confirm Is this event happening in your (or someone else's) home? (in Location Tab) ");
            $('#messageActaul').hide();

            $("#pop1").trigger("click");
            return false;
        }

        else
        {
            if( val1 == 1)
            {
                //var cnt1=0; var val2;
                //$("input[type='radio'][name='homeEventApproval']:checked").each(function ()
                //{
                //    val2=$(this).val();
                //    cnt1++;
                //});
                if(homeeventapprovalcheck == 0  )
                {
                    $('#message').text("Please Confirm you have the necessary approvals in place to do this? (in Location Tab) ");
                    $('#messageActaul').hide();

                    $("#pop1").trigger("click");
                }
                else
                {
                    if(homeeventapprovalcheck== 1)
                    {
                        $('#message').hide();
                        $('#messageActaul').show();
                        $("#pop1").trigger("click");
                        return false;
                    }
                    else
                    {
                        debugger;
                        $("#HomeEvent").attr("checked","checked");
                        return true;
                    }
                }
            }
            else
            {
                return true;
            }
            //  openpoup();


        }

    }

    function Add(){
        UpdateSeatingInfo();
        seatingCntr++;
        $("#myTable tbody").append("<tr class='rowSeat' style='height:35px !important;' id='row" + seatingCntr + "'>" +
                            "<td style='border:1px solid #e2e2e2;width:50px;vertical-align:top;padding-top:10px;' align='center'><input type='radio' name='defaultSeating' value='" + seatingCntr + "' class='defaultSeat' checked='checked' /></td>"+
                            "<td style='border:1px solid #e2e2e2;width:150px;' align='center'><input type='text' class='timepicker' style='width:120px;' /></td>"+
                            "<td style='border:1px solid #e2e2e2;width:150px;' align='center'><input type='text' value='' class='positive-integer-guests' style='width:120px;' /></td>"+
                            "<td style='border:1px solid #e2e2e2;width:150px;' align='center'><input type='text' value='' class='positive-integer-reserved' style='width:120px;' /></td>"+
                            "<td class='action' style='border:1px solid #e2e2e2;vertical-align:top;padding-top:7px;'><a class='btnDelete' href='#'>Delete</a></td></tr>" );

        $(".timepicker").timepicker({
            showLeadingZero: true,
            showPeriodLabels: true,
        });
        $(".positive-integer-guests").numeric({ decimal: false, negative: false }, function() { alert("Positive integers only"); this.value = ""; this.focus(); });
        $(".positive-integer-reserved").numeric({ decimal: false, negative: false }, function() { alert("Positive integers only"); this.value = ""; this.focus(); });

    }

    function UpdateMenuInfo(){        
        var full_content = "";
        $('tr.rowMenu').each(function() {
            $this = $(this);
            if(full_content.length > 0)
                full_content += ",";
            row_content="";
            var menuTitle = $this.find('textarea').eq(0).val();
            var menuDescription = $this.find('textarea').eq(1).val();
            var menuCost = $this.find("input.positive").val();
            var isDefault = $this.find("input.defaultMenu").is(':checked');
            if(isDefault)
            {
                $('#CostTextDisplay').val(menuCost);
                $('#Cost').val(menuCost);
            }
            var row_content= escape(menuTitle) + "|" + escape(menuDescription) + "|" +  menuCost + "|" + (isDefault? "1":"0") + "|0";
            full_content += row_content ;
        });
        //alert("full_content:" + full_content);
        $("#MenuOptions").val(full_content);
    }

    function AddMenu(){
        UpdateMenuInfo();
        menuOptionCntr++;
        $("#myMenuTable tbody").append(
             "<tr class='rowMenu' style='height:35px !important;' id='rowMenu" + menuOptionCntr + "'>" +
                            "<td style='border:1px solid #e2e2e2;width:50px;vertical-align:top;padding-top:10px;' align='center'><input type='radio' name='defaultMenu' value='" + menuOptionCntr + "' class='defaultMenu' checked='checked' /></td>" +
                            "<td style='border:1px solid #e2e2e2;width:180px;vertical-align:middle;' align='center'><textarea class='menuTitle' style='width:150px;'></textarea></td>" +
                            "<td style='border:1px solid #e2e2e2;width:150px;vertical-align:middle;' align='center'><textarea class='menuDescription' style='width:150px;'></textarea></td>" +
                            "<td style='border:1px solid #e2e2e2;width:150px;vertical-align:middle;' align='center'><input type='text' value='' class='positive' style='width:120px;' name='BasePrice' /></td>" +
                            "<td style='border:1px solid #e2e2e2;width:150px;vertical-align:middle;' align='center'><span class='CommissionText'>+ "+   @Model.Commission +"% =</span></td>" +
                            "<td style='border:1px solid #e2e2e2;width:150px;vertical-align:middle;' align='center'><label class='GuestPrice'> </label></td>" +
                            "<td class='action' style='border:1px solid #e2e2e2;vertical-align:top;padding-top:7px;'><a class='btnDeleteMenu' href='#'>Delete</a></td></tr>");

        $(".positive").numeric({ negative: false }, function() { alert("No negative values"); this.value = ""; this.focus(); });
        $(".menuTitle").attr("maxLength", 50);
    
        //$("input[name='GuestPrice']").bind("change",function ()
        //{
            
        //    if($("#MultiMenuOption").prop('checked') == true)
        //    {
        //        $('tr.rowMenu').each(function() {
        //            $this = $(this);
        //            var basePrice = $this.find("input[name='BasePrice']");
        //            var commission= $("#Commission").val();
        //            var totalPrice = $this.find("input[name='GuestPrice']");
                    
        //            basePrice.value = parseFloat(totalPrice.value) - (parseFloat(totalPrice.value) * (parseFloat(commission)/(100+parseFloat(commission))));

        //        });
        //    }
        //    else
        //    {

        //        var basePrice = document.getElementById("CostTextDisplay");
        //        var totalPrice = document.getElementById("CostToGuest");
        //        var commission=document.getElementById("Commission");
        //        basePrice.value = parseFloat(totalPrice.value) - (parseFloat(totalPrice.value) * (parseFloat(commission.value)/(100+parseFloat(commission.value))));
                
        //    }
         
        //});
     
        $("input[name='BasePrice']").bind("change",function ()
        {   
           
            if($("#MultiMenuOption").prop('checked') == true)
            {
                
                $('tr.rowMenu').each(function() {
                    debugger;
                    $this = $(this);
                    var basePrice = $this.find("input[name='BasePrice']").val();
                    var commission= $("#Commission").val();
                    var totalPrice = $this.find('.GuestPrice');
                  
                    //  totalPrice[0].value = parseFloat(basePrice)+(basePrice* (commission/100));
                    totalPrice.text(Math.round(parseFloat(basePrice)+(basePrice* (commission/100))));

                });

            }
            else
            {
                var basePrice = document.getElementById("CostTextDisplay");
                basePrice.value=basePrice.value.replace("£","");
                var totalPrice = document.getElementById("CostToGuest");
                var commission=document.getElementById("Commission");
               // totalPrice.text = parseFloat(basePrice.value)+(basePrice.value * (commission.value/100));
                $('#lblGuest').text(Math.round(parseFloat(basePrice.value)+(basePrice.value * (commission.value/100))));
            }
         
        });

        
    }

        function ValidateTab1()
        {
            debugger;         
            
            var message="";
            $('#validationMessage').empty();

            if(! $('#Name').valid())
                var message= $('span[for="Name"]').text();         
           
           
            if($("#MultiSeating").prop('checked') == false)
            {
                if(!$('#Guests').valid())
            
                    message +="<br/>"+$('span[for="Guests"]').text();

                if(!$('#ReservedSeats').valid())

                    message +="<br/>"+$('span[for="ReservedSeats"]').text();
            }
            if(!$('#Duration').valid())

                message +="<br/>"+$('span[for="Duration"]').text();

            if(!$('#HouseRule').valid())

                message +="<br/>"+$('span[for="HouseRule"]').text();

            var seats=true;
            $('tr.rowSeat').each(function() {
                $this = $(this);
                var totalGuestCount = $this.find("input.positive-integer-guests").val();
                if(totalGuestCount =="" || totalGuestCount ==0)
                {
                    seats=false;

                }
                var seatingTimeSel = $this.find("input.timepicker").val();
                if(seatingTimeSel =="")
                {
                    seats=false;

                }

            });
            if(seats==false &&  $("#MultiSeating").prop('checked') == true)
            {
                message +="<br/>"+"Please provide guests and time for all the seatings";
            }
            
            $('#validationMessage').append(message);

            

            if(message == "")
                return true;
            else 
            {
                $('#pop3').trigger("click");
                return false;
            }

            
        }


        function ValidateTab2()
        {

            var message="";

            $('#validationMessage').empty();

            if(!$('#Address').valid())

                message =$('span[for="Address"]').text();
            
            if(!$('#Address2').valid())

                message +="<br/>"+$('span[for="Address2"]').text();

            if(!$('#City').valid())

                message+="<br/>"+$('span[for="City"]').text();

            if(!$('#PostCode').valid())

                message +="<br/>"+$('span[for="PostCode"]').text();
            
            $('#validationMessage').append(message);

            if(message == "")
                return true;
            else 
            {
                $('#pop3').trigger("click");
                return false;
            }
             
        }

        

        function ValidateTab3()
        {

            var message="";

            $('#validationMessage').empty();

            if(!$('#Cuisines').valid())

                message =$('span[for="Cuisines"]').text();

            if(!$('#Diets').valid())

                message  +="<br/>"+$('span[for="Diets"]').text();


            if(!$('#MultiMenuOption').valid())

                message  +="<br/>"+$('span[for="MultiMenuOption"]').text();


            if(!$('#CostTextDisplay').valid())

                message  +="<br/>"+$('span[for="CostTextDisplay"]').text();

            if(!$('#Menu').valid())

                message  +="<br/>"+$('span[for="Menu"]').text();

            if(!$('#Alcohol').valid())

                message  +="<br/>"+$('span[for="Alcohol"]').text();

            
            if(!$('#Private').valid())

                message  +="<br/>"+$('span[for="Private"]').text();

          

            var tagValid;

            if($("#EventTagList").val()=="")
                message  +="<br/>"+"Please select atleat one tag";
            
            var menuval=true;

            $('tr.rowMenu').each(function() {
                
                $this = $(this);
                var basePrice = $this.find("input[name='BasePrice']").val();

                if(basePrice=="")
                    menuval=false;
            });

            if(menuval==false &&  $("#MultiMenuOption").prop('checked') == true)
            {
                message  +="<br/>"+"Please provide the price for all menu items";
            }
            $('#validationMessage').append(message);

            if(message == "")
                return true;
            else 
            {
                $('#pop3').trigger("click");
                return false;
            }
        }

        

        function tabnav2Click()
        {
            if(!ValidateTab1())
            {
                $("#tabnav1").addClass("active");
                $("#tabnav2").removeClass("active");
                $('#tab1').css('display','block');
                $('#tab2').css('display','none');
                return false;
            }
        }

        function tabnav3Click()
        {
             
            if(!ValidateTab1())
            {
                $("#tabnav1").addClass("active");
                $("#tabnav3").removeClass("active");
                $('#tab1').css('display','block');
                $('#tab3').css('display','none');
                return false;
            }
            if(!(ValidateTab2()))
            {
                $("#tabnav2").addClass("active");
                $("#tabnav3").removeClass("active");
                $('#tab2').css('display','block');
                $('#tab3').css('display','none');
                return false;
            }

            validateApproval();
            

        }

        function tabnav4Click()
        {
            if(!ValidateTab1())
            {
                $("#tabnav1").addClass("active");
                $("#tabnav4").removeClass("active");
                $('#tab1').css('display','block');
                $('#tab4').css('display','none');
                return false;

            }
            if(!ValidateTab2())
            {
                $("#tabnav2").addClass("active");
                $("#tabnav4").removeClass("active");
                $('#tab2').css('display','block');
                $('#tab4').css('display','none');
                return false;
            }
            if(!ValidateTab3())
            {
                $("#tabnav3").addClass("active");
                $("#tabnav4").removeClass("active");
                $('#tab3').css('display','block');
                $('#tab4').css('display','none');
                return false;
            }

           
        }

        function tabnav5CLick()
        {
            if(!ValidateTab1())
            {
                $("#tabnav1").addClass("active");
                $("#tabnav5").removeClass("active");
                $('#tab1').css('display','block');
                $('#tab5').css('display','none');
                return false;
            }
            if(!ValidateTab2())
            {
                $("#tabnav2").addClass("active");
                $("#tabnav5").removeClass("active");
                $('#tab2').css('display','block');
                $('#tab5').css('display','none');
                return false;
            }
            if(!ValidateTab3())
            {
                $("#tabnav3").addClass("active");
                $("#tabnav5").removeClass("active");
                $('#tab3').css('display','block');
                $('#tab5').css('display','none');
                return false;
            }

            if($('input:checkbox[id="chkCommunal"]')[0].checked)
                return true
            else
            {
               

                $("#tabnav4").addClass("active");
                $("#tabnav5").removeClass("active");
                $('#tab4').css('display','block');
                $('#tab5').css('display','none');
                $("#pop2").trigger("click");
                return false;
            }

        }



        function tabnav6Click()
        {
            if(!ValidateTab1())
            {
                $("#tabnav1").addClass("active");
                $("#tabnav6").removeClass("active");
                $('#tab1').css('display','block');
                $('#tab6').css('display','none');
                return false;
            }
            if(!ValidateTab2())
            {
                $("#tabnav2").addClass("active");
                $("#tabnav6").removeClass("active");
                $('#tab2').css('display','block');
                $('#tab6').css('display','none');
                return false;
            }
            if(!ValidateTab3())
            {
                $("#tabnav3").addClass("active");
                $("#tabnav6").removeClass("active");
                $('#tab3').css('display','block');
                $('#tab6').css('display','none');
                return false;
            }
            
        }
        function ValidateTab(tabId)
        {
            if(tabId==2)
                tabnav2Click();
            else if(tabId==3)
                tabnav3Click();
            else if(tabId==4)
                tabnav4Click();
            else if(tabId==5)
                tabnav5Click();
            else if(tabId==6)
                tabnav6Click();

        }
        function GotoTab(tabId) {
            
        //Reset active class for nav and display tab block contents
        $(".tabs-nav").children().removeClass("active");
        $("#tabnav" + tabId).addClass("active");

        $(".tabs-container").children().css("display", "none");
        $("#tab" + tabId).css("display", "block");
        if($("#MultiSeating").prop('checked') == true)
            UpdateSeatingInfo();
        if($("#MultiMenuOption").prop('checked') == true)
            UpdateMenuInfo();

        ValidateTab(tabId);
    }
    function UpdateSeatingInfo(){
        var full_content = "";
        $('tr.rowSeat').each(function() {
            $this = $(this);
            if(full_content.length > 0)
                full_content += ",";
            row_content="";
            var totalGuestCount = $this.find("input.positive-integer-guests").val();
            var reservedSeatCount = $this.find("input.positive-integer-reserved").val();
            var seatingTimeSel = $this.find("input.timepicker").val();
            var isDefault = $this.find("input.defaultSeat").is(':checked');
            if(isDefault)
            {
                var splitTime=seatingTimeSel.split(":");
                var start_date = @Model.Start.Day +"/"+@Model.Start.Month+"/"+@Model.Start.Year+ " " + splitTime[0]+':'+splitTime[1]+':00';
                $('#StartTime').val(start_date);
                $('#Guests').val(totalGuestCount);
                $('#ReservedSeats').val(reservedSeatCount);
            }
            var row_content= seatingTimeSel + "|" + totalGuestCount + "|" +  reservedSeatCount + "|" +  (isDefault? "1":"0") + "|0";
            full_content += row_content ;
        });
        //alert("full_content:" + full_content);
        $("#Seatings").val(full_content);
    }

    var showErrorClicks = 0;
    function ShowErrorClicks() {
        if (showErrorClicks == parseInt(@System.Web.Configuration.WebConfigurationManager.AppSettings["ShowValidationSummaryClicks"])) {
            $('#validationSummary').toggle();
        }
        else {
            showErrorClicks += 1;
        }
    }

    var latestEditedImageId = "";
    var featherEditor = new Aviary.Feather({
        apiKey: '@System.Web.Configuration.WebConfigurationManager.AppSettings["AviaryApiKey"]',
        onSave: function(imageID, newURL) {
            debugger;
            $.post('/event/saveUpdatedImage', {url: newURL, imageId: imageID})
            latestEditedImageId = imageID;            
        },
        onClose: function (isDirty) {
            if (isDirty)
                latestEditedImageId = "";
            else {
                debugger;
                if (latestEditedImageId.length > 0) {
                    var res = latestEditedImageId.split("_");
                    if (res.length > 1) {
                        var folderPathIdentifier = res[0];
                        var fileName = res[1];
                        var folderPath = "";
                        switch (folderPathIdentifier) {
                            case "t":
                                folderPath = "@SupperClub.Code.ServerMethods.ServerUrl" + "@SupperClub.Code.ServerMethods.TempImagePathPartial";
                                break;
                            case "e":
                                folderPath = "@SupperClub.Code.ServerMethods.ServerUrl" + "@SupperClub.Code.ServerMethods.EventImagePathPartial";
                                break;
                            case "s":
                                folderPath = "@SupperClub.Code.ServerMethods.ServerUrl" + "@SupperClub.Code.ServerMethods.SupperClubImagePathPartial";
                                break;
                        }
                        if (folderPath.length > 0) {
                            localFileDest = folderPath + fileName;
                            var img = document.getElementById('dis_' + fileName);
                            img.src = localFileDest + "?" + +new Date().getTime();
                        }
                    }
                }
            }
        },
        onError: function(errorObj) {
            alert(errorObj.message);
        }
    });

    function launchEditor(id, src) {
        debugger;
        featherEditor.launch({
            image: id,
            url: src,
            cropPresets :[
                    'Custom',
                    'Original',
                    ['Square', '1:1'],
                    '3:2', '5:3', '4:3', '5:4', '6:4', '7:5', '10:8', '16:9'
                ],
            cropPresetsStrict: true,
            forceCropPreset: ['', '6:4'],
            forceCropMessage: 'Images need to be 6:4'
        });
        return false;
    }

    //Move to a tab with any invalid fields
    $(document).ready(function () {
        $("#divMultiSeating").hide();
        $("#divCreateTag").hide();
        $('#divImgEdit').hide();

        $("#Cuisines").prop("readonly", true);
        $('#ClearCuisine').live("click", function() {
            $("#Cuisines").val("");
        });

        var appendthis =  ("<div class='modal-overlay js-modal-close'></div>");
        $('a[data-modal-id]').click(function(e) {
            e.preventDefault();
            $("body").append(appendthis);
            $(".modal-overlay").fadeTo(500, 0.7);
            //$(".js-modalbox").fadeIn(500);
            var modalBox = $(this).attr('data-modal-id');
            $('#'+modalBox).fadeIn($(this).data());
            $('.js-modal-close').focus();
        });

        $('input[data-modal-id]').click(function(e) {
            e.preventDefault();
            $("body").append(appendthis);
            $(".modal-overlay").fadeTo(500, 0.7);
            //$(".js-modalbox").fadeIn(500);
            var modalBox = $(this).attr('data-modal-id');
            $('#'+modalBox).fadeIn($(this).data());
            $('.js-modal-close').focus();
        });

        $(".js-modal-close, .modal-overlay").click(function() {
            $(".modal-box, .modal-overlay").fadeOut(500, function() {
                $(".modal-overlay").remove();
            });

        });

        $(window).resize(function() {
            $(".modal-box").css({
                top: ($(window).height() - $(".modal-box").outerHeight()) / 2,
                left: ($(window).width() - $(".modal-box").outerWidth()) / 2
            });
        });
        $(window).resize();


        $('#MultiSeating').live("click", function() {
            if (this.checked) {
                $('#divMultiSeating').show();
                $('#divSingleSeating').hide();
                if(seatingCntr = 0)
                    seatingCntr = 1;
            }
            else {
                $('#divMultiSeating').hide();
                $('#divSingleSeating').show();
            }
        });

        $('.counter').textcounter({            
        type: "word",
        stopInputAtMaximum: true,
        countDown: true,
        countDownText: "Words Remaining: %d",
        max: 51,
        min:5
        });

        $('.counter1').textcounter({            
            type: "word",
            stopInputAtMaximum: true,
            countDown: true,
            countDownText: "Words Remaining: %d",
            max: 51,
            min:5
        });

        $('.counter2').textcounter({            
            type: "word",
            stopInputAtMaximum: true,
            countDown: true,
            countDownText: "Words Remaining: %d",
            max: 51,
            min:5
        });

        $('.counter3').textcounter({            
            type: "word",
            stopInputAtMaximum: true,
            countDown: true,
            countDownText: "Words Remaining: %d",
            max: 51,
            min:5
        });

        $("#divMultiMenu").hide();

        $('#MultiMenuOption').live("click", function() {
            if (this.checked) {
                $('#divMultiMenu').show();
                $('#divSingleMenu').hide();
                if(menuOptionCntr = 0)
                    menuOptionCntr = 1;
            }
            else {
                $('#divMultiMenu').hide();
                $('#divSingleMenu').show();
            }
        });


        $('.searchable').multiSelect({
            selectableHeader: "<input type='text' class='search-input' autocomplete='off' placeholder='Search...'>",
            selectionHeader: "<input type='text' class='search-input' autocomplete='off' placeholder='Search...'>",
            afterInit: function(ms){
                var that = this,
                    $selectableSearch = that.$selectableUl.prev(),
                    $selectionSearch = that.$selectionUl.prev(),
                    selectableSearchString = '#'+that.$container.attr('id')+' .ms-elem-selectable:not(.ms-selected)',
                    selectionSearchString = '#'+that.$container.attr('id')+' .ms-elem-selection.ms-selected';

                that.qs1 = $selectableSearch.quicksearch(selectableSearchString)
                .on('keydown', function(e){
                    if (e.which === 40){
                        that.$selectableUl.focus();
                        return false;
                    }
                });

                that.qs2 = $selectionSearch.quicksearch(selectionSearchString)
                .on('keydown', function(e){
                    if (e.which == 40){
                        that.$selectionUl.focus();
                        return false;
                    }
                });
            },
            afterSelect: function(){
                this.qs1.cache();
                this.qs2.cache();
            },
            afterDeselect: function(){
                this.qs1.cache();
                this.qs2.cache();
            }
        });
        jQuery.validator.methods["date"] = function (value, element) { return true; } 
        
        $.datepicker.setDefaults($.datepicker.regional['en-GB']);
        $.datepicker.setDefaults({ dateFormat: 'dd/mm/yy' });

        $('.date').datepicker({
            dateFormat: "dd/mm/yy",
            minDate: new Date(@DateTime.Now.Year, @DateTime.Now.Month - 1, @DateTime.Now.Day),
        });

        $('#StartTime').timepicker({
            defaultTime: '@Model.Start.Hour:@Model.Start.Minute',
            showLeadingZero: true,
            showPeriodLabels: true,
        });
        $('.timepicker').timepicker({
            showLeadingZero: true,
            showPeriodLabels: true,
        });

        $(".menuTitle").attr("maxLength", 50);

        $(".positive").numeric({ negative: false }, function() { alert("No negative values"); this.value = ""; this.focus(); });

        $(".positive-integer-guests").numeric({ decimal: false, negative: false }, function() { alert("Positive integers only"); this.value = ""; this.focus(); });
        $(".positive-integer-reserved").numeric({ decimal: false, negative: false }, function() { alert("Positive integers only"); this.value = ""; this.focus(); });

        $('#txtOtherAllergy').val(@Model.OtherAllergyText);

        $('input[name="cbSameAsSC"]').bind('click', function () {
            if ($('#cbSameAsSC').is(':checked'))
            {
                $.ajax({
                    url: '@Url.Action("GetSupperClubDetails", "Event")',
                    type: "POST",
                    success: function (supClub) {
                        $("#Address").val(supClub.Address);
                        $("#Address2").val(supClub.Address2);
                        $("#City").val(supClub.City);
                        $("#PostCode").val(supClub.PostCode);

                    },
                    error: function () {
                        alert("Failed to get Grub Club details.");
                    }
                });
            }
            else{
                $("#Address").val("");
                $("#Address2").val("");
                $("#City").val("");
                $("#PostCode").val("");
            }
        });

        // Format while typing, 2 decimal places
        $("#CostTextDisplay").toNumber().formatCurrency({ symbol:'£' });
        $('#CostTextDisplay').blur(function() {
            $(this).formatCurrency({ symbol:'£' });
        })
        .keyup(function(e) {
            var e = window.event || e;
            var keyUnicode = e.charCode || e.keyCode;
            if (e !== undefined) {
                switch (keyUnicode) {
                    case 16: break; // Shift
                    case 17: break; // Ctrl
                    case 18: break; // Alt
                    case 27: this.value = ''; break; // Esc: clear entry
                    case 35: break; // End
                    case 36: break; // Home
                    case 37: break; // cursor left
                    case 38: break; // cursor up
                    case 39: break; // cursor right
                    case 40: break; // cursor down
                    case 78: break; // N (Opera 9.63+ maps the "." from the number key section to the "N" key too!) (See: http://unixpapa.com/js/key.html search for ". Del")
                    case 110: break; // . number block (Opera 9.63+ maps the "." from the number block to the "N" key (78) !!!)
                    case 190: break; // .
                    default: $(this).formatCurrency({ symbol:'£', roundToDecimalPlace: -1 });
                }
            }
        });
        var basePrice = document.getElementById("CostTextDisplay");
      //  var totalPrice = document.getElementById("CostToGuest");
        var commission=document.getElementById("Commission");
        var value1=basePrice.value.replace("£","");
       // totalPrice.value = parseFloat(value1)+(value1 * (commission.value/100));
        $('#lblGuest').text(Math.round(parseFloat(value1)+(value1 * (commission.value/100))));
        

        $('#CostTextDisplay').change(function ()
        {
            debugger;
            var basePrice = document.getElementById("CostTextDisplay");
          //  var totalPrice = document.getElementById("CostToGuest");
            var commission=document.getElementById("Commission");
            basePrice.value=basePrice.value.replace("£","");
            // totalPrice.value = parseFloat(basePrice.value)+(basePrice.value * (commission.value/100));
            $('#lblGuest').text(Math.round(parseFloat(basePrice.value)+(basePrice.value * (commission.value/100))));
        });

        $('#CostTextDisplay').mouseleave(function ()
        {
            debugger;
            var basePrice = document.getElementById("CostTextDisplay");
            //  var totalPrice = document.getElementById("CostToGuest");
            var commission=document.getElementById("Commission");
            basePrice.value=basePrice.value.replace("£","");
            // totalPrice.value = parseFloat(basePrice.value)+(basePrice.value * (commission.value/100));
            $('#lblGuest').text(Math.round(parseFloat(basePrice.value)+(basePrice.value * (commission.value/100))));
        });
        $("input[name='BasePrice']").change(function ()
        {   
           
            if($("#MultiMenuOption").prop('checked') == true)
            {
                
                $('tr.rowMenu').each(function() {
                    debugger;
                    $this = $(this);
                    var basePrice = $this.find("input[name='BasePrice']").val();
                    var commission= $("#Commission").val();
                    var totalPrice = $this.find('.GuestPrice');
                  
                    //  totalPrice[0].value = parseFloat(basePrice)+(basePrice* (commission/100));
                    totalPrice.text(Math.round(parseFloat(basePrice)+(basePrice* (commission/100))));

                });

            }
            else
            {
                var basePrice = document.getElementById("CostTextDisplay");
                basePrice.value=basePrice.value.replace("£","");
               // var totalPrice = document.getElementById("CostToGuest");
                var commission=document.getElementById("Commission");
                //  totalPrice.value = parseFloat(basePrice.value)+(basePrice.value * (commission.value/100));
                $('#lblGuest').text(Math.round(parseFloat(basePrice.value)+(basePrice.value * (commission.value/100))));

            }
         
        });

        //$("input[name='GuestPrice']").change(function ()
        //{
        //    debugger;
        //    if($("#MultiMenuOption").prop('checked') == true)
        //    {
        //        $('tr.rowMenu').each(function() {
        //            alert('1234');
        //            $this = $(this);
        //            var basePrice = $this.find("input[name='BasePrice']");
        //            var commission= $("#Commission").val();
        //            var totalPrice = $this.find("input[name='GuestPrice']");
        //            alert(totalPrice.value);
        //            basePrice.value = parseFloat(totalPrice.value) - (parseFloa(totalPrice.value) * (parseFloat(commission)/(100+parseFloat(commission))));
        //            alert(basePrice);
        //        });
        //    }
        //    else
        //    {

        //        var basePrice = document.getElementById("CostTextDisplay");
        //        var totalPrice = document.getElementById("CostToGuest");
        //        var commission=document.getElementById("Commission");
        //        basePrice.value = parseFloat(totalPrice.value) - (parseFloat(totalPrice.value) * (parseFloat(commission.value)/(100+parseFloat(commission.value))));
                
        //    }
         
        //});

        $("#Commission").change(function() {
            var comm = $("#Commission").val();
            comm=comm.replace(".00","");

            $("#lblCommission").html(comm);

            $('.CommissionText').each(function()
            {
                this.text(comm);
            });
            
        });

        $("#CuisinesDL").change(function () {
            var cuisineText = $("#Cuisines").val();
            var selectedCuisine = $("#CuisinesDL option:selected").text();
            if(cuisineText.length > 0 && cuisineText[cuisineText.length-1] != "," && cuisineText.indexOf(selectedCuisine) == -1)
                cuisineText = cuisineText + ", "+ selectedCuisine;
            else if(cuisineText.length == 0)
                cuisineText = selectedCuisine;
            $("#Cuisines").val(cuisineText);
        });

        $('.btnDelete').on("click", function() {
            //alert ("OK I am getting this far!. ");
            // get the ID associted with this table-row.
            var myID = $(this).parents('tr').attr("id");
            //alert("My row is: " + myID);
            $("#"+ myID).remove();
            UpdateInfo();
            return false;
        });

        $('.btnDeleteMenu').on("click", function() {
            //alert ("OK I am getting this far!. ");
            // get the ID associted with this table-row.
            var myID = $(this).parents('tr').attr("id");
            //alert("My row is: " + myID);
            $("#"+ myID).remove();
            UpdateMenuInfo();
            return false;
        });

        $('.searchable').change(function () {
            var str = "";
            $(".searchable option:selected").each(function() {
                str += $(this).val() + ",";
            });
            $("#EventTagList").val(str);
        }).change();

        $("#CreateEventForm").submit(function (){
            debugger;
            var str = "";
            $(".searchable option:selected").each(function() {
                str += $(this).val() + ",";
            });
            $("#EventTagList").val(str);

            //Combine event description
            var _description = $('.counter').val() + "|&|" + $('.counter1').val() + "|&|" + $('.counter2').val() + "|&|" + $('.counter3').val();
            $("#Description").val(_description);
            var _menu = $("#EventMenu").val();
            $("#Menu").val(_menu);
            debugger;
            $("#CreateEventForm").validate();
            //Get any tab with errors
            var tabWithError = $("#CreateEventForm .input-validation-error").closest(".tab-content");
            if (tabWithError.length > 0) {
                tabName = tabWithError.get(0).id;
                tabSelect = tabName.substring(3);
                GotoTab(tabSelect);
            }
            debugger;
            //Update seating info if multiSeating event
            if($("#MultiSeating").prop('checked') == true)
            {
                if($("#Seatings").length == 0)
                {
                    alert("You have selected multi seating option. Please create seatings!");
                }
                else
                {
                    UpdateSeatingInfo();
                }
            }
            // Handle Diet CheckBoxes - convert back to comma delimited string
            var diets = "";
            $(".dietCB:checked").each(function () {
                diets = diets + this.name + "|" + @(((int)SupperClub.Domain.DietType.Diet).ToString()) + "%";
            });

            var array = @Html.Raw(
                Json.Encode(((IEnumerable<SupperClub.Domain.Diet>)ViewBag.AllergyDiets).Select(d => new { dietName=d.Name, dietId = d.Id, dietType = d.DietTypeId})));

            for (var i = 0; i < array.length; i++)
            {
                if($('#'+ array[i].dietId).is(':checked'))
                {
                    diets = diets + array[i].dietName + "|" + array[i].dietType + "%";
                }
            }

            var otherAllergy = $("#txtOtherAllergy").val();
            if( otherAllergy.length > 0)
            {
                diets = diets + otherAllergy + "|" + @(((int)SupperClub.Domain.DietType.Others).ToString()) + "%";
                $("#OtherAllergyText").val(otherAllergy);
            }
            $("#Diets").val(diets); // Update the hidden field
            debugger;
            // Check if tags has been set for the event
            if($("#EventTagList").length == 0 || $("#EventTagList") == "")
            {
                alert("Please select atleast one tag for the event!");
                return false;
            }
            debugger;

            //Update menu options if multi menu option is selected for the event
            if($("#MultiMenuOption").prop('checked') == true)
            {
                if($("#MenuOptions").length == 0)
                {
                    alert("You have selected multi menu option. Please create menu options!");
                }
                else
                {
                    UpdateMenuInfo();
                }
            }

        });


        $('#btnChooseFile').click(function () {
            $('#File').click();
        });




        $("input[type='radio'][name='homeEvent']").change(function ()
        {
            if($(this).val()== "0")

                $("#divApproval").hide();
            else
                $("#divApproval").show();

        });

        $("#rdohomeEventApprovalNo").click(function()
        {
            homeeventapprovalcheck=1;
            $('#message').hide();
            $('#messageActaul').show();
            $("#pop1").trigger("click");
        });

        $("input[name='homeEventApproval']").change(function ()
        {
            debugger;
            if($(this).val()== "0")
            {
                homeeventapprovalcheck=1;
                $('#message').hide();
                $('#messageActaul').show();
                $("#pop1").trigger("click");
            }
            else
            {
                homeeventapprovalcheck=2;
            }


            //  openpoup();

        });

        $('#btnSubmit').click(function(e)
        {
            debugger;
            e.preventDefault();
            if(validateApproval()&& validateCommunal())
            {

                $('#btnSubmitForm').trigger("click");
            }

        });
        function validateCommunal()
        {
            debugger;
            if($('input:checkbox[id="chkCommunal"]')[0].checked)
                return true
            else
            {
                $("#pop2").trigger("click");
                return false;
            }
        }

       

        $("#tabnav2").click(function()
        {
            tabnav2Click();               
        });
        $("#tabnav3").click(function()
        {
            tabnav3Click();
            
        });

        $("#tabnav4").click(function()
        {
           
            tabnav4Click();
            
        });

        $("#tabnav5").click(function()
        {
            tabnav5CLick();          
            
        });

        $("#tabnav6").click(function()
        {
           
            tabnav6Click();
            
        });

        // Delete Images
        $('body').on('click', 'a.btnDeleteImage', function (e){
            debugger;
            var tempScrollTop = $(window).scrollTop();
            var imagePaths = $("#ImagePaths").val();
            var imageToRemove = $(this).closest('tr').children('td.ImgId').text();
            if(imagePaths.length > 0 && imagePaths.indexOf(imageToRemove) != -1)
            {
                imagePaths = imagePaths.replace("," + imageToRemove, "");
                imagePaths = imagePaths.replace(imageToRemove + ",", "");
                imagePaths = imagePaths.replace(imageToRemove, "");
            }
            $("#ImagePaths").val(imagePaths);
            $(this).closest("tr").remove();
            $(window).scrollTop(tempScrollTop);
            e.preventDefault();
            return false;
        });

        var mp3 = new Mprogress({
            template: 3,
            parent: '#demoIn'
        });
        $('#btnImgUpload').click(function(e) {
            e.preventDefault();
            var files = $("#avatar").prop("files");
            var totalRequestSize = 0;
            if (files.length > 0)
            {
                if (window.FormData !== undefined)
                {
                    var form_data = new FormData();
                    for (var x = 0; x < files.length; x++)
                    {
                        form_data.append("file" + x, files[x]);
                        totalRequestSize += files[x].size;
                    }
                    if (totalRequestSize > 1024 * 1024 * 7) {
                        alert("Total file size exceeded 7MB. Please select fewer files and continue.");
                        return false;
                    }
                    else {
                        mp3.start();
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("SaveUploadedFile", "Event")',
                            dataType: 'json',
                            data: form_data,
                            processData: false,
                            contentType: false,
                            success: function(data, textStatus, request){
                                debugger;
                                var imageUrl = data.Message;
                                var imagePath = $("#ImagePaths").val();
                                var secondUpload = false;
                                if(imagePath.length > 0)
                                {
                                    imagePath = imagePath + ","+ imageUrl;
                                    secondUpload = true;
                                }
                                else if(imagePath.length == 0)
                                    imagePath = imageUrl;
                                $("#ImagePaths").val(imagePath);
                                //logic to render thumbnail and edit button
                                var res = imageUrl.split(",");
                                for (var i = 0; i < res.length; i++)
                                {
                                    var imageFullUrl = "@SupperClub.Code.ServerMethods.ServerUrl" + "Content/Images/tempImages/" + res[i];
                                    var newRow = $("<tr>");
                                    var cols = "";
                                    var _imgId = res[i];
                                    cols += '<td style="display:none;" class="ImgId">' + _imgId + '</td>';
                                    cols += '<td style="display:none;"><img src="' + imageFullUrl + '" id="t_' + _imgId + '" /></td>';
                                    cols += '<td style="padding:20px;"><img src="' + imageFullUrl + '" alt="@Model.Name" style="width:240px;" id="dis_' + _imgId + '" /></td>';
                                    cols += '<td><a class="btnEditImage" onclick="return launchEditor(\'t_'+ _imgId +'\',\'' + imageFullUrl + '\');">Edit your picture</a></td>';
                                    cols += '<td><a class="btnDeleteImage" href="#">Delete</a></td>';
                                    if(i == 0 && !secondUpload)
                                    {
                                        cols += '<td style="width:310px;">'+
                                            '<div style="color:red;font-weight:bold;text-align:left;">To ensure pictures look great on the site,' + 
                                            '<ul class="links-list-red"> <li> Press "Edit your picture"</li><li>Select "Crop"</li><li>Select the "6:4" option to crop your image to the correct size.</li><li>Click "Apply" and then</li><li>Click on "Save"</li></ul></div></td></tr>';
                                    }
                                    else{
                                        cols += '<td></td></tr>';
                                    }
                                    newRow.append(cols);
                                    $("#tblImgList").append(newRow);
                                }
                                $('#divImgEdit').show();
                                mp3.end(true);
                            },
                            error: function (request, textStatus, errorThrown) {
                                alert("error:" + errorThrown);
                            }
                        });
                        e.preventDefault();
                    }
                }
                else
                {
                    alert("This browser doesn't support HTML5 file uploads!");
                }
            }
        });
    });

        
</script>
    }
<!--  Page Title -->
<div class="container pattern-design2">
    <div class="container">
        <p>@HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString() / @ViewBag.Title</p>
    </div>
</div>
<!-- Page Title End -->
@if (ViewBag.Notification != null || TempData["Notification"] != null)
{
    SupperClub.Models.NotificationModel nModel = (ViewBag.Notification == null) ? (SupperClub.Models.NotificationModel)TempData["Notification"] : (SupperClub.Models.NotificationModel)ViewBag.Notification;
    TempData["Notification"] = null;
    @Html.Partial("_Notification", nModel);
}
@if (ViewBag.HideMainContainer == null || ViewBag.HideMainContainer == false)
{
    <!-- 960 Container Start -->
    <div class="container">
        @using (Html.BeginForm("CreateEvent", "Event", FormMethod.Post, new { id = "CreateEventForm", enctype = "multipart/form-data" }))
        {
            @Html.HiddenFor(m => m.ImagePath)
            <div class="sixteen columns">
                <!-- Hidden Validation Summary --->
                <div id="validationSummary" style="display:none">
                    @Html.ValidationSummary()
                    <br />
                </div>

                <!-- Tabs Navigation -->
                <ul class="tabs-nav">
                    <li class="active" id="tabnav1"><a href="#tab1">Details</a></li>
                    <li id="tabnav2"><a href="#tab2">Location</a></li>
                    <li id="tabnav3" ><a href="#tab3">Menu</a></li>
                    <li id="tabnav4"><a href="#tab4">Other</a></li>
                    <li id="tabnav5"><a href="#tab5">Picture</a></li>
                    <li id="tabnav6"><a href="#tab6" onclick="ShowErrorClicks();">Create</a></li>
                </ul>
                <!-- Tabs Content -->
                <div class="tabs-container">
                    <div class="tab-content" id="tab1">
                        @Html.HiddenFor(m => m.Seatings)
                        @Html.HiddenFor(m => m.MenuOptions)
                        <a href="#" class="button medium yellow button-next" style="float:right" onclick="GotoTab(2)"><i class="icon-chevron-right"></i>Next</a>

                        <p>Please review all the tabs and ensure you have all your information ready in advance, before creating your event. You cannot save in progress (yet!)</p>

                        <div class="field"> @*inline*@
                            @Html.LabelFor(m => m.Name)
                            @Html.ValidationMessageFor(m => m.Name)
                            <p>Name your event for this specific date. E.g. "Summer feast". (You won't be able to change this)</p>
                            @Html.EditorFor(m => m.Name)
                        </div>
                        <div class="field"> @*inline_right*@
                            @Html.LabelFor(m => m.Start)
                            @Html.ValidationMessageFor(m => m.Start)
                            <p>This is the day of your event. (You won't be able to change this)</p>
                            @Html.EditorFor(m => m.Start, "DatePicker")
                        </div>
                        @*<br />*@
                        <div class="field">
                            @Html.LabelFor(m => m.MultiSeating)
                            @Html.ValidationMessageFor(m => m.MultiSeating)
                            @Html.EditorFor(m => m.MultiSeating, "MultiSeating") Please check this box if you want to set multiple seating times
                        </div>   
                        <br />
                        <div id="divMultiSeating" style="width:100%">
                            <input type="button" class="button medium yellow button-next" style="float:left" id="btnAdd" title="Create Seating" value="Add new seating" onclick="Add();"/>
                            <br />
                            <br />
                            <table id="myTable" class="seatingTable" style="border:1px solid #e2e2e2;">
                            <thead style="border:1px solid #e2e2e2;color:#564A40;font-size:14px;font-weight:bold;padding:8px 15px;">
                                <tr>
                                    <th style="width:50px;border:1px solid #e2e2e2;vertical-align:middle;">Choose Main Seating</th>
                                    <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Seating Time</th>
                                    <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Total guests</th>
                                    <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Reserved Seats</th>
                                    <th style="width:50px;border:1px solid #e2e2e2;vertical-align:middle;">Action</th>
                                </tr>
                            </thead>
                            <tbody style="border:1px solid #e2e2e2;">
                               <tr class="rowSeat" style="height:35px !important;" id="row1">
                                    <td style="border:1px solid #e2e2e2;width:50px;vertical-align:top;padding-top:10px;" align="center"><input type='radio' name='defaultSeating' value="1" class="defaultSeat" checked="checked" /></td>
                                    <td style="border:1px solid #e2e2e2;width:150px;" align="center"><input type="text" class="timepicker" style="width:120px;" /></td>
                                    <td style="border:1px solid #e2e2e2;width:150px;" align="center"><input type="text" value="" class="positive-integer-guests" style="width:120px;" /></td>
                                    <td style="border:1px solid #e2e2e2;width:150px;" align="center"><input type="text" value="" class="positive-integer-reserved" style="width:120px;" /></td>                                     
                                    <td class="action" style="border:1px solid #e2e2e2;vertical-align:top;padding-top:7px;"><a class="btnDelete" href="#">Delete</a></td>
                                </tr>             
                            </tbody>
                        </table>       
                        <br />                      
                        </div>
                        <div id="divSingleSeating">                            
                            <div class="field">
                                @Html.LabelFor(m => m.StartTime)
                                @Html.ValidationMessageFor(m => m.StartTime)
                                <p>This is the time your guests can start to arrive. (You won't be able to change this)</p>
                                @Html.EditorFor(m => m.StartTime, "TimePicker")
                            </div>
                            <div class="field">
                                @Html.LabelFor(m => m.Guests)
                                @Html.ValidationMessageFor(m => m.Guests)
                                <p>This is the total number of people you will be accommodating for.</p>
                                @Html.EditorFor(m => m.Guests) 
                            </div>
                            <div class="field">
                                @Html.LabelFor(m => m.ReservedSeats)
                                @Html.ValidationMessageFor(m => m.ReservedSeats)
                                <p>This is the number of seats you want to hold back in reserve, we won't sell tickets for these.</p>
                                @Html.EditorFor(m => m.ReservedSeats)
                            </div>                            
                        </div>
                        <div class="field">
                                @Html.LabelFor(m => m.Duration)
                                @Html.ValidationMessageFor(m => m.Duration)
                                <p>This is an approximate length of time for the event.</p>
                                @Html.EditorFor(m => m.Duration)
                            </div>
                       
                        <br />
                                                              
                        <div class="field">   
                            @Html.LabelFor(m => m.Description)                         
                            @Html.HiddenFor(m => m.Description)
                            <p>What makes your experience unique? Why is it different to going to a restaurant? * (Minimum: 5 words, Maximum:50 words) </p>
                            @if (ViewBag.EventDescriptionList != null && ViewBag.EventDescriptionList.Length > 0 && ViewBag.EventDescriptionList[0] != null)
                            {                               
                                <textarea class="counter">@ViewBag.EventDescriptionList[0]</textarea>
                            }
                            else
                            {
                                <textarea class="counter"></textarea>
                            }  
                        </div>
                        <br/>
                        <div class="field">
                            <p>Is there anything you can tell us about the menu? A special recipe that you learnt from a mysterious person on your travels? Or maybe an interesting story behind the local producer who supplies you the ingredients * (Minimum: 5 words, Maximum:50 words)</p>
                            @if (ViewBag.EventDescriptionList != null && ViewBag.EventDescriptionList.Length > 1 && ViewBag.EventDescriptionList[1] != null)
                            {
                                <textarea class="counter1" rows="3" cols="50">@ViewBag.EventDescriptionList[1]</textarea>
                            }
                            else
                            {
                                <textarea class="counter1" rows="3" cols="50"></textarea>
                            }
                        </div>
                        <br />
                        <div class="field">
                            <p>Tell us about your venue.  Does it have a unique history? Perhaps it was used for something unusual? Perhaps an interesting story you have about the owners now or in the past * (Minimum: 5 words, Maximum:50 words)</p>
                            @if (ViewBag.EventDescriptionList != null && ViewBag.EventDescriptionList.Length > 2 && ViewBag.EventDescriptionList[2] != null)
                            {
                                <textarea class="counter2" rows="3" cols="50">@ViewBag.EventDescriptionList[2]</textarea>
                            }
                            else
                            {
                                <textarea class="counter2" rows="3" cols="50"></textarea>
                            }
                        </div>
                        <br />
                        <div class="field">
                            <p>How would you describe the vibe of your event? * (Minimum: 5 words, Maximum:50 words)</p>
                            @if (ViewBag.EventDescriptionList != null && ViewBag.EventDescriptionList.Length > 3 && ViewBag.EventDescriptionList[3] != null)
                            {
                                <textarea class="counter3" rows="3" cols="50">@ViewBag.EventDescriptionList[3]</textarea>
                            }
                            else
                            {
                                <textarea class="counter3" rows="3" cols="50"></textarea>
                            }
                        </div>
                        <br />
                        <div class="field">
                            @Html.LabelFor(m => m.HouseRule)
                            @Html.ValidationMessageFor(m => m.HouseRule)
                            <p>Anything you would particularly like to mention about rules in your home/space. Eg no smoking/smoking in the back garden, noise levels, respect cleanliness/space as it's your home, etc.</p>
                            @Html.EditorFor(m => m.HouseRule)
                        </div>
                    </div>
                    
                    <div class="tab-content" id="tab2">
                       
                        <div>

                            <a href="#" class="button medium yellow button-next" style="float:right" onclick="GotoTab(3)"><i class="icon-chevron-right"></i>Next</a>

                            <div class="editor field check-box-field">
                                <input type="checkbox" id="cbSameAsSC" class="check-box" name="cbSameAsSC" value="true" />
                                <label for="cbSameAsSC">Same as your Profile</label>
                            </div>
                            <p>Tick this box if this specific event will be in the same location as your registered Grub Club address</p>

                            <div class="label">
                                @Html.LabelFor(m => m.Address)
                                @Html.ValidationMessageFor(m => m.Address)
                                <p>If you are hosting your event in a different space, complete the information here. Please note: only your area, rather than precise address, will be visible to the public. Guest will only receive the full address after they have booked and paid for the event.</p>
                            </div>
                            <div class="field">
                                @Html.EditorFor(m => m.Address)
                            </div>
                            <div class="label">
                                @Html.LabelFor(m => m.Address2)
                                @Html.ValidationMessageFor(m => m.Address2)
                            </div>
                            <div class="field">
                                @Html.EditorFor(m => m.Address2)
                            </div>
                            <div class="label">
                                @Html.LabelFor(m => m.City)
                                @Html.ValidationMessageFor(m => m.City)
                            </div>
                            <div class="field">
                                @Html.EditorFor(m => m.City)
                            </div>
                            <div class="label">
                                @Html.LabelFor(m => m.PostCode)
                                <p>Please ensure you use appropriate spacing. e.g. W127ER = W12 7ER</p>
                                @Html.ValidationMessageFor(m => m.PostCode)
                            </div>
                            <div class="field">
                                @Html.EditorFor(m => m.PostCode)
                            </div>

                        </div>

                        <div>
                            <div style="display:none;">
                                @Html.EditorFor(m => m.HomeEvent)
                            </div>


                            Is this event happening in your (or someone else's) home? <br />

                            <input type="radio" name="homeEvent" id="rdoHomeEventYes" value="1" style="width:20px;" /> Yes

                            <input type="radio" name="homeEvent"   value="0" style="width:20px;margin-left:30px;" /> No <br />

                            <div id="divApproval" style="display:none;">

                                Please confirm you have the necessary approvals in place to do this <br />

                                <input type="radio" name="homeEventApproval" value="1" style="width:20px;" /> Yes

                                <input type="radio" id="rdohomeEventApprovalNo"     data-modal-id="popup1" name="homeEventApproval" value="0" style="width:20px;margin-left:30px;" /> No <br />
                                
                                <section class="v-center" style=" display:none;">
                                    <a class="js-open-modal btn" href="#" data-modal-id="popup1" id="pop1" > Pop Up One</a>
                                    <a class="js-open-modal btn" href="#" data-modal-id="popup2" id="pop2"> Pop Up One</a>
                                    <a class="js-open-modal btn" href="#" data-modal-id="popup3" id="pop3"> Pop Up One</a>

                                </section>
                            </div>
</div>
                        
                    </div>
                    
                    <div class="tab-content" id="tab3">
                        
                        <a href="#" class="button medium yellow button-next" style="float:right" onclick="GotoTab(4)"><i class="icon-chevron-right"></i>Next</a>

                        <h6>Do you need helping finding support for the night?</h6>
                        <p>Send us <a href="@Url.Action("ContactUs", "Home", new { messageText = "I need help for..." })" target="_blank">a message request for help</a> with your requirements so we can do our best.</p>
                        
                        <div class="field">
                            @Html.Label("Cuisine")
                            @Html.ValidationMessageFor(m => m.Cuisines)
                            <p>Type of food cooked for the event. E.g. "Spanish" or "Middle Eastern". Select your cuisine from the drop-down menu. You can add multiple cuisines if required.</p>
                            @Html.DropDownList("CuisinesDL", (SelectList)ViewBag.Cuisines, "- Select Cuisine -", new { @class = "custom_select" })
                            @Html.EditorFor(m => m.Cuisines) <button id="ClearCuisine" type="button" style="border:none !important; display:inline !important; background:none;color:blue;text-decoration: underline; padding-bottom:10px;">Clear Cuisine Text</button>
                            </div>
                        <div class="field">
                            @Html.LabelFor(m => m.Diets)
                            @Html.ValidationMessageFor(m => m.Diets)
                            <p>Do you cater for the following requirements?</p>
                            @*Small hack to change Diets from tag cloud to checkboxes. Will probably be changed back in future.
                              Javascript on submit fills the hidden Diets field back with a string*@
                            @foreach (SupperClub.Domain.Diet d in ViewBag.StandardDiets)
                            {
                                @Html.CheckBox(d.Name, (Model.Diets.Contains(d.Name + "|" + d.DietTypeId.ToString())), new {@style="width:20px;", @class = "dietCB" })
                                @d.Name
                                <br />
                            }
                            <br />
                            <div style="display:none;">
                                <p>Do you cater to people with any of the allergies mentioned below?</p>
                                <table>
                                    @foreach (SupperClub.Domain.Diet d in ViewBag.AllergyDiets)
                            {
                                        <tr>
                                            <td> @d.Name</td>
                                            <td>
                                                @if(Model.SelectedDietIds.Contains(d.Id))
                                        {
                                                    <input type="radio" name="@d.Name" value="@d.Id" id='@d.Id' title="Yes" checked="checked" style="width:20px;" />
                                        }
                                        else
                                        {
                                                    <input type="radio" name="@d.Name" value="@d.Id" id='@d.Id' title="Yes" style="width:20px;" />
                                        }
                                                Yes
                                            </td>
                                            <td style="margin-left:30px;">
                                                <input type="radio" name="@d.Name" value="@d.Id" id='no @d.Name' title="No" style="width:20px;margin-left:30px;" />
                                                No
                                            </td>
                                        </tr>
                            }
                                </table>
                                <br />
                                <p>If you can cater specifically to any other allergy, please mention it below</p>
                                <input type="text" id="txtOtherAllergy" maxlength="500" />
                                @Html.HiddenFor(m => m.Diets)
                            </div>                           
                        </div>
                        <div class="field">
                            @Html.LabelFor(m => m.MultiMenuOption)
                            @Html.ValidationMessageFor(m => m.MultiMenuOption)
                            @Html.EditorFor(m => m.MultiMenuOption, "MultiMenuOption") Please check this box if you want to have multiple menu options to your guests
                        </div>
                        @if (SupperClub.Code.UserMethods.IsAdmin)
                         {
                        <div class="field" style="display:none;">
                            <label> Commission </label>

                                @Html.EditorFor(m => m.Commission)
                            
                            

                        </div> 
                        } 
                        else
                        {
                             <div class="field" style="display:none;">
                           
                           
                                @Html.HiddenFor(m => m.Commission)
                            
                            

                        </div> 
                            
                        }
                        <br/>
                        <div id="divMultiMenu" style="width:100%">
                            <input type="button" class="button medium yellow button-next" style="float:left" title="Create Menus" value="Add New Menu Option" onclick="AddMenu();" style="width:35%;margin-top:10px;margin-left:10%;" />
                            <br />
                            <br />
                            <table id="myMenuTable" class="menuTable" style="border:1px solid #e2e2e2;">
                                <thead style="border:1px solid #e2e2e2;color:#564A40;font-size:14px;font-weight:bold;padding:8px 15px;">
                                    <tr>
                                        <th style="width:50px;border:1px solid #e2e2e2;vertical-align:middle;">Choose Main Option</th>
                                        <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Title</th>
                                        <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Description</th>
                                        <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Cost</th>
                                        <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">Commission</th>
                                        <th style="width:150px;border:1px solid #e2e2e2;vertical-align:middle;">CosttoGuest</th>
                                        <th style="width:50px;border:1px solid #e2e2e2;vertical-align:middle;">Action</th>
                                    </tr>
                                </thead>
                                <tbody style="border:1px solid #e2e2e2;">
                                    <tr class="rowMenu" style="height:35px !important;" id="rowMenu1">
                                        <td style="border:1px solid #e2e2e2;width:50px;vertical-align:top;padding-top:10px;" align="center"><input type='radio' name='defaultMenu' value="1" class="defaultMenu" checked="checked" /></td>
                                        <td style="border:1px solid #e2e2e2;width:180px;vertical-align:middle;" align="center"><textarea class="menuTitle" style="width:150px;"></textarea></td>
                                        <td style="border:1px solid #e2e2e2;width:150px;vertical-align:middle;" align="center"><textarea style="width:150px;"></textarea></td>
                                        <td style="border:1px solid #e2e2e2;width:150px;vertical-align:middle;" align="center"><input type="text" value="" class="positive" style="width:120px;" name="BasePrice" /></td>
                                        <td style="border:1px solid #e2e2e2;width:150px;vertical-align:middle;" align="center"><span class="CommissionText">+   @Model.Commission% =</span></td>
                                        <td style="border:1px solid #e2e2e2;width:150px;vertical-align:middle;" align="center"><label class="GuestPrice"> </label></td>
                                        <td class="action" style="border:1px solid #e2e2e2;vertical-align:top;padding-top:7px;"><a class="btnDeleteMenu" href="#">Delete</a></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br />
                        </div>
                        <div id="divSingleMenu">
                            <div class="field">
                                <table>
                                    <tr>
                                        <td>@Html.LabelFor(m => m.CostTextDisplay)</td>
                                        <td style="font-size:12px;"><b>Commission</b></td>
                                        <td>&nbsp;&nbsp;&nbsp;</td>
                                        <td style="font-size:12px;"><b>GuestPrice (Please ensure the Guest ticket price (inc. booking fee) is consistent if tickets are being sold elsewhere.)</b></td>
                                    </tr>
                                    <tr>
                                        <td>@Html.EditorFor(m => m.CostTextDisplay, new { name = "BasePrice" }) </td>
                                        <td><span class="CommissionText">+   @Model.Commission% =</span></td>
                                        <td>&nbsp;&nbsp;&nbsp;</td>
                                        <td>@*<input type="text" id="CostToGuest" name="GuestPrice" />*@
                                          <label id="lblGuest"></label>
                                        </td>

                                    </tr>
                                </table>
                                </div>
                                <div class="field">
                                    @*@Html.LabelFor(m => m.CostTextDisplay)*@
                                    <span>
                                        Grub Club will automatically add 10% to the price you enter (includes Grub Club's 7% commission and the Bank's 3% transaction fee).
                                        Eg. If you input a £20 price, the final price displayed to customers will be £22.<br />
                                        @*Please ensure the Guest ticket price (inc. booking fee) is consistent if tickets are being sold elsewhere.*@
                                    </span>
                                    @Html.ValidationMessageFor(m => m.CostTextDisplay)

                                </div>


                                @*<div class="field">
                                    <label> Guest Price </label>
                                    <span>
                                        the amount will automatically populate with Price to Guest, based on the original price you enter. However, you can also complete this box and it will then populate the box above, showing the amount you will receive
                                    </span>
                                    <input type="text" id="CostToGuest" name="GuestPrice" />


                                </div>*@
                            </div>  
                        <div class="field">
                            <label>Menu</label>
                            <p>Put a  <span style="font-size:20px">*</span> (star) between courses to create a list that will be shown to guests</p>
                            <p>E.g. "A fresh glass of Sangria to welcome you, with garlic and herb infused olives; * Chickpeas with cucumber and pomengrante molasses on crusty bread * etc"</p>
                            @Html.ValidationMessageFor(m => m.Menu)
                            @Html.HiddenFor(m => m.Menu)
                            @Html.TextAreaFor(m => m.Menu, new { id = "EventMenu" })
                        </div>
                         <div class="field">
                            <label>Tags</label>
                            @Html.HiddenFor(m => m.EventTagList)                            

                             <select class="searchable" multiple="multiple" >
                                 @foreach (SupperClub.Domain.Tag t in ViewBag.Tags)
                                 {
                                     if (@Model.SelectedTagIds.Contains(t.Id))
                                     {
                                         <option value="@t.Id" selected="selected">@t.Name</option>
                                     }
                                     else
                                     {
                                         <option value="@t.Id">@t.Name</option>
                                     }
                                 }
                             </select> 
                            <br />
                           @* <input type="button" class="button medium yellow button-next" id="CreateTag" style="float:left" title="Create Tags" value="Add New Tag" />
                            <div id="divCreateTag">
                                <label for="txtTagName">Tag name: </label>
                                <input type="text" id="txtTagName" value="" style="width:120px;" />
                                <label for="txtTagName">Tag SEO name: </label>
                                <input type="text" id="txtTagSeo" value="" style="width:120px;" />
                                <a id="btnCreateTag" href="#" class="button medium yellow" style="float:left">Add Tag</a>
                                <a id="btnCreateTagCancel" href="#" class="button medium yellow" style="float:left">Cancel</a>
                            </div>*@
                        </div>
                    </div>

                    <div class="tab-content" id="tab4">
                        
                        <a href="#" class="button medium yellow button-next" style="float:right" onclick="GotoTab(5)"><i class="icon-chevron-right"></i>Next</a>
                        
                        <div class="field check-box-field">
                            @Html.ValidationMessageFor(m => m.Alcohol)
                            @Html.EditorFor(m => m.Alcohol)
                            @Html.LabelFor(m => m.Alcohol)
                            <p>If you do not haven an alcohol licence for the event, you are not allowed to sell alcohol though you are permitted to give complementary drinks e.g. a welcome cocktail or a digestif.</p>
                        </div>
                        <br />
                        <div class="field check-box-field">
                            @Html.ValidationMessageFor(m => m.Charity)
                            @Html.EditorFor(m => m.Charity)
                            @Html.LabelFor(m => m.Charity)
                            <p>Is this event a fundraiser for charity? If so, tick this box. You should describe the details for guests in the "Desciption" section in the "Details tab" which descibes the event guests are signing up for.</p>
                        </div>
                        <br />
                        <div class="field check-box-field">
                            @Html.ValidationMessageFor(m => m.Private)
                            @Html.EditorFor(m => m.Private)
                            @Html.LabelFor(m => m.Private)
                            <p>Tick this box if you want to keep your event private. This means your event will not appear in Search results or Future Events on Grub Club and will not be marketed by us. You can send the event URL to your contacts for them to book privately.</p>
                        </div> 

                        <div class="field check-box-field">
                            <input type="checkbox" class="check-box" id="chkCommunal" />
                            <label>Is your event a communal dining experience?</label>
                            <p> i.e. Can diners feel welcome even if they come on their own?</p>
                        </div> 
                        <br />

                        @*<div class="field check-box-field">
        @Html.ValidationMessageFor(m => m.WalkIn)
        @Html.EditorFor(m => m.WalkIn)
        @Html.LabelFor(m => m.WalkIn)
        <p>Tick this box if your guests can come anytime during the event timing.</p>
    </div>*@ 

    <br />
                        @*<div class="field check-box-field">
                            @Html.ValidationMessageFor(m => m.ContactNumberRequired)
                            @Html.EditorFor(m => m.ContactNumberRequired)
                            @Html.LabelFor(m => m.ContactNumberRequired)
                            <p>Tick this box if we must collect Guest's contact number while booking the tickets.</p>
                        </div>*@   
                        
                        <div>
                            <p>
                                Would you like to offer your diners a discount voucher to incentivise bookings? If so, email
                                <a href="mailto:eat@grubclub.com" target="_top"> eat@grubclub.com</a>
                            </p>
                        </div>          
                    </div>
                    
                    <div class="tab-content" id="tab5">

                        <a href="#" class="button medium yellow button-next" style="float:right" onclick="GotoTab(6)"><i class="icon-chevron-right"></i>Next</a>

                        <p>You are strongly recommended to upload pictures to give your guests a feel for the event. This could be a picture of the type of food you plan to cook, a picture of the venue, a picture of you cooking. Anything to give a personal touch so guests can visualise your event in some way.</p>

                        <p>MIN 5 PICTURES! We will only approve your grub club if you have amazing, mouthwatering pictures that showcase what you do. </p>
                        
                        <p>The very last picture you upload will be the one displayed on our Search Listings, so make sure it's your favourite one! You can change this at any point.</p>

                        <p>Total size of the pictures being uploaded should not exceed 7MB at once. You can always add more pictures to your event after creating it!</p>
                        
                        @Html.HiddenFor(m => m.ImagePaths, new { data_files = "true" })
                        @*<div class="containercontent">
                            <div id="ImageContainer"></div>
                            <div id="Uploader"> </div>
                            <div id="ImagePreview" style="display:none">
                                <img id="ImageView"  />
                            </div>
                        </div>
                        <iframe src="@(SupperClub.Code.ServerMethods.ServerUrl)event/addimage" frameborder="0" width="900" height="900"></iframe>*@
                        
                        <h3>Step 1: Select the pictures</h3>
                        <input id="avatar" type="file" name="avatar" multiple style="margin-bottom:10px;" />
                        <br />
                        <br />

                        <h3>Step 2: Upload your pictures</h3>
                        <button id="btnImgUpload" class="button medium orange" value="Upload">Upload</button>
                        <div id="demoIn" class="demo-bar"></div>
                            
                        <div id="divImgEdit" style="float:left;">
                            <h3>Step 3: Edit your pictures</h3>
                            <table id="tblImgList" class="tblImgList-table">
                                <thead style="">
                                    <tr>
                                        <th style="display:none;">ImageId</th>
                                        <th style="display:none;">ImageFull</th>
                                        <th>Image</th>
                                        <th>Action</th>
                                        <th>Delete</th>
                                        <th>Note</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-content" id="tab6">
                            <p>Don't forget to submit all the details of your event. You MUST press "Create my Event" in order to submit all the information</p>
                            <input type="button" id="btnSubmit" value="Create my Event" class="button medium orange"  />
                            <input type="submit" id="btnSubmitForm" value="Create my Event" class="button medium orange" style="display:none;" />
                        </div>

                    </div>

                </div>
        }
        </div>
    }
   </div>

    }
               
        <div id="popup1" class="modal-box">
        <header>
            <a href="#" class="js-modal-close close">×</a>
            <h3>cannot proceed further questions </h3>
        </header>
        <div class="modal-body">

    <p><span id="message"></span>
        <span id="messageActaul">Do you have the necessary approvals in place to do this? Please check the legalities section of <a href="http://grubclub.com/host/faqs#fundamental" target="_blank">Setting up a Grub Club </a> for details.</span></p>
        </div>
        <footer> <a href="#" class="btn btn-small js-modal-close">Close</a> </footer>
</div>

<div id="popup2" class="modal-box">
    <header>
        <a href="#" class="js-modal-close close">×</a>
        <h3>cannot proceed further questions </h3>
    </header>
    <div class="modal-body">
        <span>Your event must be Communal, Please select Communal check box in (Others) tab to successfully submit your event</span>
    </div>
    <footer> <a href="#" class="btn btn-small js-modal-close">Close</a> </footer>

    </div>

<div id="popup3" class="modal-box">
    <header>
        <a href="#" class="js-modal-close close">×</a>
        <h3>Please fill all the required fields</h3>
    </header>
    <div class="modal-body">
        <div id="validationMessage"></div>
    </div>
    <footer> <a href="#" class="btn btn-small js-modal-close">Close</a> </footer>

</div>

